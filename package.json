{
  "name": "lm-tools-bridge",
  "displayName": "lm-tools-bridge",
  "publisher": "jiangxiaoxu",
  "version": "1.0.63",
  "icon": "resources/icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/jiangxiaoxu/-lm-tools-bridge.git"
  },
  "homepage": "https://github.com/jiangxiaoxu/-lm-tools-bridge#readme",
  "engines": {
    "vscode": "^1.104.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "lm-tools-bridge.start",
        "title": "LM Tools Bridge: Start Server"
      },
      {
        "command": "lm-tools-bridge.stop",
        "title": "LM Tools Bridge: Stop Server"
      },
      {
        "command": "lm-tools-bridge.configureExposure",
        "title": "LM Tools Bridge: Configure Exposure Tools"
      },
      {
        "command": "lm-tools-bridge.configureEnabled",
        "title": "LM Tools Bridge: Configure Enabled Tools"
      },
      {
        "command": "lm-tools-bridge.statusMenu",
        "title": "LM Tools Bridge: Status Menu"
      },
      {
        "command": "lm-tools-bridge.openHelp",
        "title": "LM Tools Bridge: Open Help"
      }
    ],
    "configuration": {
      "title": "LM Tools Bridge",
      "properties": {
        "lmToolsBridge.server.autoStart": {
          "type": "boolean",
          "default": true,
          "description": "Automatically start the MCP server on startup."
        },
        "lmToolsBridge.server.port": {
          "type": "number",
          "default": 48123,
          "minimum": 1,
          "maximum": 65535,
          "description": "Port for the MCP server."
        },
        "lmToolsBridge.manager.httpPort": {
          "type": "number",
          "default": 47100,
          "minimum": 1,
          "maximum": 65535,
          "description": "Port for the LM Tools Bridge manager HTTP MCP gateway."
        },
        "lmToolsBridge.useWorkspaceSettings": {
          "type": "boolean",
          "default": false,
          "description": "Only honored when set in workspace settings. User/global settings are ignored. When enabled, lmToolsBridge settings are read/written at the workspace scope and override user settings."
        },
        "lmToolsBridge.clangd.enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable clangd MCP tools (lm_clangd_*)."
        },
        "lmToolsBridge.clangd.autoStartOnInvoke": {
          "type": "boolean",
          "default": true,
          "description": "Automatically trigger the clangd extension startup command when a clangd MCP tool is invoked and clangd is not running."
        },
        "lmToolsBridge.clangd.enablePassthrough": {
          "type": "boolean",
          "default": true,
          "description": "Expose lm_clangd_lspRequest, a restricted passthrough tool for allowed LSP request methods."
        },
        "lmToolsBridge.clangd.requestTimeoutMs": {
          "type": "number",
          "default": 10000,
          "minimum": 100,
          "description": "Default timeout in milliseconds for clangd MCP requests."
        },
        "lmToolsBridge.clangd.allowedMethods": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Allowed method list for lm_clangd_lspRequest. Empty uses the built-in read-only allowlist. Entries outside the built-in read-only list are ignored."
        },
        "lmToolsBridge.tools.enabledDelta": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Additional exposed LM tool names to enable relative to the default enabled list."
        },
        "lmToolsBridge.tools.disabledDelta": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Additional exposed LM tool names to disable relative to the default enabled list. This takes precedence over tools.enabledDelta."
        },
        "lmToolsBridge.tools.exposedDelta": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Additional LM tool names to expose relative to the default exposed list."
        },
        "lmToolsBridge.tools.unexposedDelta": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Additional LM tool names to unexpose relative to the default exposed list. This takes precedence over tools.exposedDelta. Tools in the built-in default-enabled list remain exposed."
        },
        "lmToolsBridge.tools.groupingRules": {
          "type": "array",
          "default": [
            {
              "id": "angelscript",
              "label": "AngelScript",
              "pattern": "^angelscript_"
            },
            {
              "id": "clangd",
              "label": "Clangd",
              "pattern": "^lm_clangd_"
            }
          ],
          "items": {
            "type": "object",
            "required": [
              "id",
              "label",
              "pattern"
            ],
            "additionalProperties": false,
            "properties": {
              "id": {
                "type": "string",
                "description": "Stable rule id used to build internal group ids."
              },
              "label": {
                "type": "string",
                "description": "Display label of the custom group."
              },
              "pattern": {
                "type": "string",
                "description": "JavaScript regex pattern for matching tool names, without surrounding slashes."
              },
              "flags": {
                "type": "string",
                "description": "Optional regex flags. Stateful flags like g/y are ignored."
              }
            }
          },
          "description": "Regex-based tool grouping rules. Matching priority is built-in disabled > custom rules > built-in groups. Rules are applied in list order and first match wins."
        },
        "lmToolsBridge.tools.schemaDefaults": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "List of input defaults in the \"toolName.paramName=value\" format. If a tool schema defines the property and the caller omits it, this value will be injected into schemas and tool invocations. Entries not in the \"toolName.paramName=value\" format are ignored. Values accept quoted strings (double quotes), true/false, numbers, or arrays written as \"{a,b,c}\" where each element is a quoted string, number, or boolean (whitespace allowed, empty elements allowed). Unquoted strings are rejected. JSON is not accepted. Examples: \"lm_findTextInFiles.maxResults=500\"; \"tool.param=1\"; \"tool.param=\\\"MyStr\\\"\"; \"tool.param=true\"; \"tool.param={6,4}\"."
        },
        "lmToolsBridge.tools.responseFormat": {
          "type": "string",
          "default": "text",
          "enum": [
            "text",
            "structured",
            "both"
          ],
          "description": "Controls how MCP tool calls return data. \"text\" returns only content.text (human-readable). \"structured\" returns only structuredContent (machine-readable) with empty content. \"both\" returns both content.text and structuredContent. This setting applies to all tools."
        },
        "lmToolsBridge.debug": {
          "type": "string",
          "default": "off",
          "enum": [
            "off",
            "simple",
            "detail"
          ],
          "description": "Controls logging verbosity. \"off\" logs only plugin status. \"simple\" logs tool name/input and elapsed time. \"detail\" adds full tool outputs (including structuredContent when enabled)."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile && npm run bundle",
    "bundle": "node ./scripts/bundle.mjs",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.25.2",
    "@vscode/ripgrep": "^1.17.0",
    "zod": "^3.25.0"
  },
  "devDependencies": {
    "@types/node": "^20.11.19",
    "@types/vscode": "^1.95.0",
    "esbuild": "^0.27.2",
    "typescript": "^5.4.5"
  }
}
